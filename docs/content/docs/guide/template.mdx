---
title: Template
description: Learn how to define permissions using templates
---

## Overview

Permix provides a `template` method that allows you to define permissions in a separate location from where they are set up. This is useful for organizing permission definitions and reusing them across different parts of your application.

<Callout>
Templates are validated when they are created, ensuring your permission definitions are correct before runtime.
</Callout>


## Basic Usage

The simplest way to use templates is to define static permissions:

```ts
const adminPermissions = permix.template({
  post: {
    create: true,
    read: true
  }
})

// Later, use the template to setup permissions
permix.setup(adminPermissions())
```

## Dynamic Templates

Templates can accept parameters to create dynamic permissions based on runtime values:

```ts
interface User {
  id: string
  role: string
}

const userPermissions = permix.template(({ id: userId }: User) => ({
  post: {
    create: true,
    read: true,
    update: post => post.authorId === userId
  }
}))

// Use with specific user data
const user = await getUser()
permix.setup(userPermissions(user))
```

## Using Templator

Permix also provides a `templator` function, which is useful when you need to create multiple templates with the same definition type without Permix instance.

```ts
import { templator } from 'permix'
import type { Definition } from './permix'

// Create a template builder for your specific definition
const template = templator<Definition>()

// Use the template builder to create multiple templates
const adminTemplate = template(({ user }) => ({
  post: {
    create: true,
    read: true,
    update: true,
    delete: true
  }
}))

const moderatorTemplate = template(({ user }) => ({
  post: {
    create: true,
    read: true,
    update: post => !post.published,
    delete: false
  }
}))

// Use the templates
const admin = await getAdmin()
const moderator = await getModerator()

permix.setup(adminTemplate(admin))
// Later, you can switch to another template
permix.setup(moderatorTemplate(moderator))
```

The `templator` function helps maintain type safety and consistency when working with multiple permission templates in your application.


## Type Safety

Templates maintain full type safety from your Permix instance definition:

```ts twoslash
import { createPermix } from 'permix'

const permix = createPermix<{
  post: {
    action: 'create'
  }
}>()

// @errors: 2353
// This will throw an error
const invalidTemplate = permix.template({
  post: {
    edit: true
  }
})
```

## Role-Based Example

Templates are particularly useful for role-based permission systems:

```ts
const editorPermissions = permix.template({
  post: {
    create: true,
    read: true,
    update: post => !post.published,
    delete: post => !post.published
  }
})

const userPermissions = permix.template(({ id: userId }: User) => ({
  post: {
    create: false,
    read: true,
    update: post => post.authorId === userId,
    delete: false
  }
}))

// Setup based on user role
function setupPermissions() {
  const user = await getUser()
  const permissionsMap = {
    editor: () => editorPermissions(),
    user: () => userPermissions(user)
  }

  return permix.setup(permissionsMap[user.role]())
}
```
