---
title: Feature Flags
---

This example demonstrates how to implement feature flags in any application using Permix.

<Steps>

<Step>

## Setup

Before you start, you need to install `permix` package. Just read [Quick Start](/docs/quick-start) guide.

</Step>

<Step>

## Integration

Not necessary, but you can use any integration to check feature flags. In this example we will use [`react` integration](/docs/integrations/react).

</Step>

<Step>

## Prepare Permix

Let's set up Permix instance and `usePermix` hook for React:

<Tabs items={['/lib/permix.ts', '/hooks/use-permix.ts']}>

<Tab value="/lib/permix.ts">

```ts
import { createPermix } from 'permix'

// Define your feature flags
export const permix = createPermix<{
  darkMode: {
    action: 'enabled'
  },
  betaFeatures: {
    action: 'newUI' | 'experimentalAPI'
  }
}>()

// ...
```

</Tab>

<Tab value="/hooks/use-permix.ts">

```ts
import { usePermix } from 'permix/react'
import { permix } from './permix'

export const useFeatureFlags = () => usePermix(permix)
```

</Tab>

</Tabs>

</Step>

<Step>

## Define feature flag templates

Create templates for different feature flag configurations:

```ts title="/lib/features.ts"
export const betaUserFeatures = permix.template({
  darkMode: {
    enabled: true
  },
  betaFeatures: {
    newUI: true,
    experimentalAPI: true
  }
})

export const regularUserFeatures = permix.template({
  darkMode: {
    enabled: true
  },
  betaFeatures: {
    newUI: false,
    experimentalAPI: false
  }
})
```

<Callout>
Templates help you organize feature flags for different user segments or environments.
</Callout>

</Step>

<Step>

## Setup feature flags

Apply feature flags based on user type or environment:

```ts title="/lib/setup-features.ts"
import { permix } from './permix'
import { betaUserFeatures, regularUserFeatures } from './features'

export async function setupFeatureFlags() {
  const user = await getUser()
  const isBetaUser = await checkBetaStatus(user)

  const featureConfig = isBetaUser
    ? betaUserFeatures()
    : regularUserFeatures()

  permix.setup(featureConfig)
}
```

```tsx title="/app.tsx"
import { setupFeatureFlags } from './lib/setup-features'

export default function App() {
  useEffect(() => {
    setupFeatureFlags()
  }, [])

  return <div>Hello World</div>
}
```

</Step>

<Step>

## Usage

Now you can use feature flags in your components:

```tsx title="NewFeature.tsx"
import { useFeatureFlags } from './hooks/use-permix'

export default function NewFeature() {
  const { check } = useFeatureFlags()

  if (!check('betaFeatures', 'newUI')) {
    return null
  }

  return (
    <div>
      This is a new UI feature only visible to beta users!
    </div>
  )
}
```

You can also check feature flags directly using the Permix instance:

```tsx title="ExperimentalAPI.tsx"
import { permix } from './permix'

export default function ExperimentalAPI() {
  async function handleApiCall() {
    if (!permix.check('betaFeatures', 'experimentalAPI')) {
      return
    }

    // Call experimental API...
  }

  return <button onClick={handleApiCall}>Try New API</button>
}
```

</Step>

</Steps>

