---
title: Enum-based permissions
---

This example demonstrates how to implement enum-based permissions in any application.

<Steps>

<Step>

## Setup

Before you start, you need to install `permix` package. Just read [Quick Start](/docs/quick-start) guide.

</Step>

<Step>

## Integration

Not necessary, but you can use any integration to check permissions. In this example we will use [`react` integration](/docs/integrations/react).

</Step>

<Step>

## Define enums

First, let's define our permission enums that we'll use.

```ts title="/lib/permissions.ts"
export enum PostPermission {
  Create = 'create',
  Read = 'read',
  Update = 'update',
  Delete = 'delete'
}

export enum UserPermission {
  Create = 'create',
  Read = 'read',
  Update = 'update',
  Delete = 'delete'
}
```

</Step>

<Step>

## Prepare Permix

Let's create a Permix instance using our enums.

<Tabs items={['/lib/permix.ts', '/hooks/use-permix.ts']}>

<Tab value="/lib/permix.ts">

```ts
import { createPermix } from 'permix'
import { PostPermission, UserPermission } from './permissions'

export const permix = createPermix<{
  post: {
    action: PostPermission
  },
  user: {
    action: UserPermission
  }
}>()
```

</Tab>

<Tab value="/hooks/use-permix.ts">

```ts
import { usePermix } from 'permix/react'
import { permix } from './permix'

export const usePermissions = () => usePermix(permix)
```

</Tab>

</Tabs>

</Step>

<Step>

## Define permission templates

Create templates using the enum values.

<Callout>
Read more about templates in the [`template` guide](/docs/guide/template).
</Callout>

```ts title="/lib/permissions.ts"
export const adminPermissions = permix.template({
  post: {
    [PostPermission.Create]: true,
    [PostPermission.Read]: true,
    [PostPermission.Update]: true,
    [PostPermission.Delete]: true
  },
  user: {
    [UserPermission.Create]: true,
    [UserPermission.Read]: true,
    [UserPermission.Update]: true,
    [UserPermission.Delete]: true
  }
})

// You can also use string literals - TypeScript will infer the enum type
export const userPermissions = permix.template({
  post: {
    create: false,
    read: true,
    update: true,
    delete: false
  },
  user: {
    create: false,
    read: true,
    update: true,
    delete: false
  }
})
```

</Step>

<Step>

## Setup permissions

Apply the permissions based on user role.

```ts title="/lib/setup-permissions.ts"
import { permix } from './permix'
import { adminPermissions, userPermissions } from './permissions'

export async function setupPermissions() {
  const user = await getUser()

  const rolesMap = {
    admin: () => adminPermissions(),
    user: () => userPermissions(user)
  }

  await permix.setup(rolesMap[user.role])
}
```

```tsx title="/app.tsx"
import { setupPermissions } from './lib/setup-permissions'

export default function App() {
  useEffect(() => {
    setupPermissions()
  }, [])

  return <div>Hello World</div>
}
```

</Step>

<Step>

## Usage

Use the enum values to check permissions.

```tsx title="PostCreate.tsx"
import { usePermissions } from './hooks/use-permix'
import { PostPermission } from './permissions'

export default function PostCreate() {
  const { check } = usePermissions()

  return (
    <div>
      Can I create a post? {check('post', PostPermission.Create) ? 'Yes' : 'No'}
    </div>
  )
}
```

If you don't need reactivity, you still can use `check` method from `permix` instance.

```tsx title="PostCreate.tsx"
import { permix } from './permix'
import { PostPermission } from './permissions'

export default function PostCreate() {
  function handleCreatePost() {
    if (!permix.check('post', PostPermission.Create)) return

    // ...
  }

  return <button onClick={handleCreatePost}>Create a post</button>
}
```

</Step>

</Steps>
